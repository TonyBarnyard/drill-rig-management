<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Drill Rig Management System - Pilgangoora</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @media print {
      body { margin: 0; padding: 0; background: white; }
      .no-print { display: none !important; }
      .print-only { display: block !important; }
    }
    .print-only { display: none; }
  </style>
</head>
<body style="margin:0;padding:0;background:#1e293b;">
  <div id="root" style="width:100%;min-height:100vh;"></div>

  <script>
    const { useState, useEffect } = window.React;
    const { createRoot } = window.ReactDOM;

    // 37 APPROVED CONSUMABLES
    const defaultConsumables = [
      { id: 1, name: 'Shock Sub: Montrae 4600', category: 'Shock Sub', partNumber: 'Montrae 4600', weight: '442', length: '562', od: '200', pinSize: '3.5 API Reg Pin', boxSize: '3.5 API Reg Box', photo: null },
      { id: 2, name: 'Shock Sub: Montrae 5600', category: 'Shock Sub', partNumber: 'Montrae 5600', weight: '820', length: '650', od: '254', pinSize: '3.5 API Reg Pin', boxSize: '3.5 API Reg Box', photo: null },
      { id: 3, name: 'Shock Sub: Montrae 3600', category: 'Shock Sub', partNumber: 'Montrae 3600', weight: '295', length: '480', od: '178', pinSize: '3.5 API Reg Pin', boxSize: '3.5 API Reg Box', photo: null },
      { id: 4, name: 'Spindle: API-DIBH Crossover 102', category: 'Spindle', partNumber: 'API-DIBH Crossover 102', weight: '18', length: '305', od: '127', pinSize: '3-1/8 DIBH Pin', boxSize: '3.5 API Reg Box', photo: null },
      { id: 5, name: 'Spindle: API-DIBH Crossover 114', category: 'Spindle', partNumber: 'API-DIBH Crossover 114', weight: '24', length: '330', od: '140', pinSize: '3-1/8 DIBH Pin', boxSize: '3.5 API Reg Box', photo: null },
      { id: 6, name: 'Spindle: DIBH-API Crossover 102', category: 'Spindle', partNumber: 'DIBH-API Crossover 102', weight: '18', length: '305', od: '127', pinSize: '3.5 API Reg Pin', boxSize: '3-1/8 DIBH Box', photo: null },
      { id: 7, name: 'Spindle: DIBH-API Crossover 114', category: 'Spindle', partNumber: 'DIBH-API Crossover 114', weight: '24', length: '330', od: '140', pinSize: '3.5 API Reg Pin', boxSize: '3-1/8 DIBH Box', photo: null },
      { id: 8, name: 'Drill Pipe: 102x6.3 - 6m DIBH', category: 'Drill Pipe', partNumber: '102x6.3 - 6m DIBH', weight: '100', length: '6000', od: '102', pinSize: '3-1/8 DIBH Pin', boxSize: '3-1/8 DIBH Box', photo: null },
      { id: 9, name: 'Drill Pipe: 102x8.8 - 6m DIBH', category: 'Drill Pipe', partNumber: '102x8.8 - 6m DIBH', weight: '134', length: '6000', od: '102', pinSize: '3-1/8 DIBH Pin', boxSize: '3-1/8 DIBH Box', photo: null },
      { id: 10, name: 'Drill Pipe: 102x12.7 - 6m API', category: 'Drill Pipe', partNumber: '102x12.7 - 6m API', weight: '174', length: '6000', od: '102', pinSize: '3.5 API IF Pin', boxSize: '3.5 API IF Box', photo: null },
      { id: 11, name: 'Drill Pipe: 114x8.8 - 6m DIBH', category: 'Drill Pipe', partNumber: '114x8.8 - 6m DIBH', weight: '152', length: '6000', od: '114', pinSize: '3-1/8 DIBH Pin', boxSize: '3-1/8 DIBH Box', photo: null },
      { id: 12, name: 'Collar Pipe: 154mm Collar - 3m', category: 'Collar Pipe', partNumber: '154mm Collar - 3m', weight: '150', length: '3000', od: '154', pinSize: '3-1/8 DIBH Pin', boxSize: '3-1/8 DIBH Box', photo: null },
      { id: 13, name: 'Collar Pipe: 154mm Collar - 6m', category: 'Collar Pipe', partNumber: '154mm Collar - 6m', weight: '300', length: '6000', od: '154', pinSize: '3-1/8 DIBH Pin', boxSize: '3-1/8 DIBH Box', photo: null },
      { id: 14, name: 'Collar Pipe: 190mm Collar - 3m', category: 'Collar Pipe', partNumber: '190mm Collar - 3m', weight: '225', length: '3000', od: '190', pinSize: '3.5 API Reg Pin', boxSize: '3.5 API Reg Box', photo: null },
      { id: 15, name: 'Collar Pipe: 190mm Collar - 6m', category: 'Collar Pipe', partNumber: '190mm Collar - 6m', weight: '450', length: '6000', od: '190', pinSize: '3.5 API Reg Pin', boxSize: '3.5 API Reg Box', photo: null },
      { id: 16, name: 'Adapter: DIBH-API Sub 6" Hammer', category: 'Adapter', partNumber: 'DIBH-API Sub 6" Hammer', weight: '22', length: '280', od: '140', pinSize: '3.5 API Reg Pin', boxSize: '3-1/8 DIBH Box', photo: null },
      { id: 17, name: 'Adapter: DIBH-API Sub 4" Hammer', category: 'Adapter', partNumber: 'DIBH-API Sub 4" Hammer', weight: '12', length: '230', od: '102', pinSize: '2-3/8 API Reg Pin', boxSize: '3-1/8 DIBH Box', photo: null },
      { id: 18, name: 'Adapter: API-API Sub 6" Hammer', category: 'Adapter', partNumber: 'API-API Sub 6" Hammer', weight: '20', length: '250', od: '140', pinSize: '3.5 API Reg Pin', boxSize: '3.5 API Reg Box', photo: null },
      { id: 19, name: 'Hammer: Sandvik RH460 6"', category: 'Hammer', partNumber: 'Sandvik RH460 6"', weight: '100', length: '1155', od: '6 inch', pinSize: 'QL60', boxSize: '3.5 API Reg Box', photo: null },
      { id: 20, name: 'Hammer: Sandvik RH460g 6"', category: 'Hammer', partNumber: 'Sandvik RH460g 6"', weight: '117', length: '1155', od: '6 inch', pinSize: 'QL60', boxSize: '3.5 API Reg Box', photo: null },
      { id: 21, name: 'Hammer: Sandvik RH510r 6"', category: 'Hammer', partNumber: 'Sandvik RH510r 6"', weight: '82', length: '922', od: '6 inch', pinSize: 'M60', boxSize: '3.5 API Reg Box', photo: null },
      { id: 22, name: 'Hammer: Sandvik RH560g 6"', category: 'Hammer', partNumber: 'Sandvik RH560g 6"', weight: '117', length: '1158', od: '6 inch', pinSize: '560-6', boxSize: '3.5 API Reg Box', photo: null },
      { id: 23, name: 'Hammer: Epiroc COP 64 Gold', category: 'Hammer', partNumber: 'Epiroc COP 64 Gold', weight: '103', length: '1255', od: '6 inch', pinSize: 'QL60', boxSize: '3.5 API Reg Box', photo: null },
      { id: 24, name: 'Hammer: Epiroc COP M6', category: 'Hammer', partNumber: 'Epiroc COP M6', weight: '72', length: '1100', od: '6 inch', pinSize: 'Solid', boxSize: '3.5 API Reg Box', photo: null },
      { id: 25, name: 'Hammer: Sandvik RH460 4"', category: 'Hammer', partNumber: 'Sandvik RH460 4"', weight: '40', length: '985', od: '4 inch', pinSize: 'DHD340', boxSize: '2-3/8 API Reg Box', photo: null },
      { id: 26, name: 'Hammer: Sandvik RH510r 4"', category: 'Hammer', partNumber: 'Sandvik RH510r 4"', weight: '38', length: '914', od: '4 inch', pinSize: 'M40', boxSize: '2-3/8 API Reg Box', photo: null },
      { id: 27, name: 'Hammer: Epiroc COP 44 Gold', category: 'Hammer', partNumber: 'Epiroc COP 44 Gold', weight: '39', length: '1049', od: '4 inch', pinSize: 'TD40', boxSize: '2-3/8 API Reg Box', photo: null },
      { id: 28, name: 'Bit: 115mm Concave M40', category: 'Bit', partNumber: '115mm Concave M40', weight: '8.4', length: '280', od: '115', pinSize: '4 inch', boxSize: 'Concave', photo: null },
      { id: 29, name: 'Bit: 115mm Concave DHD340', category: 'Bit', partNumber: '115mm Concave DHD340', weight: '8.4', length: '280', od: '115', pinSize: '4 inch', boxSize: 'Concave', photo: null },
      { id: 30, name: 'Bit: 115mm Uniface M40', category: 'Bit', partNumber: '115mm Uniface M40', weight: '9.4', length: '290', od: '115', pinSize: '4 inch', boxSize: 'Uniface', photo: null },
      { id: 31, name: 'Bit: 127mm Concave M40', category: 'Bit', partNumber: '127mm Concave M40', weight: '12', length: '300', od: '127', pinSize: '4 inch', boxSize: 'Concave', photo: null },
      { id: 32, name: 'Bit: 127mm Concave QL60', category: 'Bit', partNumber: '127mm Concave QL60', weight: '14', length: '340', od: '127', pinSize: '6 inch', boxSize: 'Concave', photo: null },
      { id: 33, name: 'Bit: 127mm Uniface M60', category: 'Bit', partNumber: '127mm Uniface M60', weight: '12.5', length: '310', od: '127', pinSize: '6 inch', boxSize: 'Uniface', photo: null },
      { id: 34, name: 'Bit: 165mm Concave M60', category: 'Bit', partNumber: '165mm Concave M60', weight: '23.5', length: '350', od: '165', pinSize: '6 inch', boxSize: 'Concave', photo: null },
      { id: 35, name: 'Bit: 165mm Concave QL60', category: 'Bit', partNumber: '165mm Concave QL60', weight: '27.5', length: '380', od: '165', pinSize: '6 inch', boxSize: 'Concave', photo: null },
      { id: 36, name: 'Bit: 165mm Convex M60', category: 'Bit', partNumber: '165mm Convex M60', weight: '23.5', length: '350', od: '165', pinSize: '6 inch', boxSize: 'Convex', photo: null },
      { id: 37, name: 'Bit: 165mm Uniface QL60', category: 'Bit', partNumber: '165mm Uniface QL60', weight: '24.5', length: '370', od: '165', pinSize: '6 inch', boxSize: 'Uniface', photo: null },
    ];

    function App() {
      // PAGE STATE
      const [currentPage, setCurrentPage] = useState('fleet');
      const [selectedRig, setSelectedRig] = useState('DR201');

      // AUTH STATE
      const [adminMode, setAdminMode] = useState(false);
      const [showLoginPrompt, setShowLoginPrompt] = useState(false);
      const [loginAttempt, setLoginAttempt] = useState('');
      const [adminPassword] = useState('admin123');

      // DATA STATE - RESET CORRUPTED DATA
      const [consumables, setConsumables] = useState(() => {
        try {
          const saved = localStorage.getItem('consumables');
          if (saved) {
            const parsed = JSON.parse(saved);
            // Check if we have valid data with at least 37 items
            if (parsed && Array.isArray(parsed) && parsed.length >= 37) {
              return parsed;
            }
          }
        } catch (e) {
          console.log('localStorage corrupted, resetting to defaults');
          localStorage.removeItem('consumables');
        }
        return defaultConsumables;
      });

      const [drills, setDrills] = useState(() => {
        try {
          const saved = localStorage.getItem('drills');
          return saved ? JSON.parse(saved) : {
            'DR201': { type: 'Epiroc D65', location: 'Wall Control', status: 'Active', hours: 2847, photo: null },
            'DR202': { type: 'Epiroc D65', location: 'Production', status: 'Active', hours: 2934, photo: null },
            'DR203': { type: 'Epiroc D65', location: 'Production', status: 'Active', hours: 3102, photo: null },
            'DR204': { type: 'Epiroc D65', location: 'Production', status: 'Active', hours: 2756, photo: null },
            'DR205': { type: 'Epiroc D65', location: 'Production', status: 'Standby', hours: 1829, photo: null },
            'DR206': { type: 'Epiroc D65', location: 'Production', status: 'Active', hours: 2645, photo: null },
            'DR207': { type: 'Epiroc D65', location: 'Wall Control', status: 'Active', hours: 2234, photo: null },
            'DR208': { type: 'CAT MD6250', location: 'Production', status: 'Active', hours: 2987, photo: null },
            'DR209': { type: 'Epiroc D65', location: 'Production', status: 'Active', hours: 3045, photo: null },
            'DR210': { type: 'Epiroc D65', location: 'Production', status: 'Active', hours: 2123, photo: null },
            'DR211': { type: 'CAT MD6250', location: 'Platform', status: 'Active', hours: 2876, photo: null },
            'DR212': { type: 'Epiroc D65', location: 'Production', status: 'Active', hours: 2645, photo: null },
            'DR213': { type: 'Epiroc D65', location: 'Platform', status: 'Active', hours: 2734, photo: null },
            'DR214': { type: 'Epiroc D65', location: 'Wall Control', status: 'Maintenance', hours: 1456, photo: null },
          };
        } catch (e) {
          return {};
        }
      });

      const [authorisedStrings, setAuthorisedStrings] = useState(() => {
        try {
          const saved = localStorage.getItem('authorisedStrings');
          return saved ? JSON.parse(saved) : {};
        } catch (e) {
          return {};
        }
      });

      const [rigStringAssignments, setRigStringAssignments] = useState(() => {
        try {
          const saved = localStorage.getItem('rigStringAssignments');
          return saved ? JSON.parse(saved) : {};
        } catch (e) {
          return {};
        }
      });

      const [logoImage, setLogoImage] = useState(() => {
        try {
          const saved = localStorage.getItem('companyLogo');
          return saved ? saved : null;
        } catch (e) {
          return null;
        }
      });

      // ADMIN UI STATE
      const [adminTab, setAdminTab] = useState('strings');
      const [showCreateString, setShowCreateString] = useState(false);
      const [showAddConsumable, setShowAddConsumable] = useState(false);
      const [showEditConsumable, setShowEditConsumable] = useState(false);
      const [selectedConsumableToEdit, setSelectedConsumableToEdit] = useState(null);
      const [showAddDrill, setShowAddDrill] = useState(false);

      // FORM STATE
      const [newConsumable, setNewConsumable] = useState({ name: '', category: '', partNumber: '', weight: '', length: '', od: '', pinSize: '', boxSize: '', photo: null });
      const [editingConsumable, setEditingConsumable] = useState({ name: '', category: '', partNumber: '', weight: '', length: '', od: '', pinSize: '', boxSize: '', photo: null });
      const [newStringName, setNewStringName] = useState('');
      const [newStringDrillType, setNewStringDrillType] = useState('Epiroc D65');
      const [newStringComponents, setNewStringComponents] = useState([]);
      const [newDrillId, setNewDrillId] = useState('DR301');
      const [newDrillType, setNewDrillType] = useState('Epiroc D65');
      const [newDrillPhoto, setNewDrillPhoto] = useState(null);

      // PERSISTENCE
      useEffect(() => { try { localStorage.setItem('consumables', JSON.stringify(consumables)); } catch (e) {} }, [consumables]);
      useEffect(() => { try { localStorage.setItem('drills', JSON.stringify(drills)); } catch (e) {} }, [drills]);
      useEffect(() => { try { localStorage.setItem('authorisedStrings', JSON.stringify(authorisedStrings)); } catch (e) {} }, [authorisedStrings]);
      useEffect(() => { try { localStorage.setItem('rigStringAssignments', JSON.stringify(rigStringAssignments)); } catch (e) {} }, [rigStringAssignments]);
      useEffect(() => { if (logoImage) { try { localStorage.setItem('companyLogo', logoImage); } catch (e) {} } }, [logoImage]);

      // ==================== HANDLERS ====================
      const handleAdminLogin = () => {
        if (loginAttempt === adminPassword) {
          setAdminMode(true);
          setShowLoginPrompt(false);
          setLoginAttempt('');
        } else {
          alert('âŒ Incorrect password');
          setLoginAttempt('');
        }
      };

      const handleLogout = () => { setAdminMode(false); setAdminTab('strings'); };

      const handleLogoUpload = (e) => {
        const file = e.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onloadend = () => {
            setLogoImage(reader.result);
            alert('âœ“ Logo uploaded!');
          };
          reader.readAsDataURL(file);
        }
      };

      const removeLogo = () => {
        if (confirm('Remove logo?')) {
          setLogoImage(null);
          try { localStorage.removeItem('companyLogo'); } catch (e) {}
          alert('âœ“ Logo removed');
        }
      };

      const createDrillString = () => {
        if (!newStringName.trim()) { alert('Enter string name'); return; }
        if (newStringComponents.length === 0) { alert('Add at least one component'); return; }
        const stringId = Date.now().toString();
        setAuthorisedStrings({
          ...authorisedStrings,
          [stringId]: { id: stringId, name: newStringName, drillType: newStringDrillType, components: newStringComponents, created: new Date().toLocaleDateString() }
        });
        alert(`âœ“ String "${newStringName}" created!`);
        setNewStringName('');
        setNewStringComponents([]);
        setShowCreateString(false);
      };

      const addConsumable = () => {
        if (!newConsumable.name.trim()) { alert('Enter consumable name'); return; }
        const nextId = consumables.length > 0 ? Math.max(...consumables.map(c => c.id)) + 1 : 1;
        setConsumables([...consumables, { id: nextId, ...newConsumable }]);
        alert('âœ“ Consumable added!');
        setNewConsumable({ name: '', category: '', partNumber: '', weight: '', length: '', od: '', pinSize: '', boxSize: '', photo: null });
        setShowAddConsumable(false);
      };

      const startEditConsumable = (consumable) => {
        setSelectedConsumableToEdit(consumable.id);
        setEditingConsumable({ ...consumable });
        setShowEditConsumable(true);
      };

      const saveEditConsumable = () => {
        if (!editingConsumable.name.trim()) { alert('Enter consumable name'); return; }
        setConsumables(consumables.map(c => c.id === selectedConsumableToEdit ? editingConsumable : c));
        alert('âœ“ Consumable updated!');
        setShowEditConsumable(false);
        setSelectedConsumableToEdit(null);
        setEditingConsumable({ name: '', category: '', partNumber: '', weight: '', length: '', od: '', pinSize: '', boxSize: '', photo: null });
      };

      const removeConsumable = (id) => {
        if (confirm('Remove this consumable?')) {
          setConsumables(consumables.filter(c => c.id !== id));
        }
      };

      const addDrill = () => {
        if (!newDrillId.trim()) { alert('Enter drill ID'); return; }
        setDrills({ ...drills, [newDrillId]: { type: newDrillType, location: 'Production', status: 'Active', hours: 0, photo: newDrillPhoto } });
        alert(`âœ“ Drill ${newDrillId} added!`);
        setNewDrillId('');
        setNewDrillPhoto(null);
        setShowAddDrill(false);
      };

      const removeDrill = (rigId) => {
        if (confirm(`Remove drill ${rigId}?`)) {
          const newDrillsData = { ...drills };
          delete newDrillsData[rigId];
          setDrills(newDrillsData);
        }
      };

      const handlePhotoUpload = (e, target) => {
        const file = e.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onloadend = () => {
            if (target === 'consumable') setNewConsumable({ ...newConsumable, photo: reader.result });
            else if (target === 'edit') setEditingConsumable({ ...editingConsumable, photo: reader.result });
            else if (target === 'drill') setNewDrillPhoto(reader.result);
          };
          reader.readAsDataURL(file);
        }
      };

      const handleDrillPhotoUpload = (rigId, e) => {
        const file = e.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onloadend = () => {
            setDrills({ ...drills, [rigId]: { ...drills[rigId], photo: reader.result } });
          };
          reader.readAsDataURL(file);
        }
      };

      const assignStringToRig = (stringId) => {
        setRigStringAssignments({ ...rigStringAssignments, [selectedRig]: stringId });
        alert(`âœ“ String assigned to ${selectedRig}`);
      };

      // ==================== LOGIN ====================
      if (showLoginPrompt) {
        return React.createElement('div', { className: 'min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 flex items-center justify-center p-4' },
          React.createElement('div', { className: 'bg-slate-800 border border-red-500/30 rounded-lg p-8 max-w-sm w-full' },
            React.createElement('h2', { className: 'text-2xl font-bold text-red-400 mb-6 text-center' }, 'ðŸ”“ Admin Login'),
            React.createElement('input', { type: 'password', placeholder: 'Password', value: loginAttempt, onChange: (e) => setLoginAttempt(e.target.value), onKeyPress: (e) => e.key === 'Enter' && handleAdminLogin(), className: 'w-full bg-slate-600 text-white rounded px-4 py-2 mb-4 border-0' }),
            React.createElement('button', { onClick: handleAdminLogin, className: 'w-full bg-red-600 hover:bg-red-500 text-white py-2 rounded font-bold mb-2 border-0 cursor-pointer' }, 'Login'),
            React.createElement('button', { onClick: () => setShowLoginPrompt(false), className: 'w-full bg-gray-600 hover:bg-gray-500 text-white py-2 rounded font-bold border-0 cursor-pointer' }, 'Cancel')
          )
        );
      }

      // ==================== EDIT CONSUMABLE ====================
      if (adminMode && showEditConsumable && selectedConsumableToEdit) {
        return React.createElement('div', { className: 'min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 text-white' },
          React.createElement('nav', { className: 'bg-slate-900 border-b border-blue-500/30 p-4' },
            React.createElement('div', { className: 'max-w-6xl mx-auto flex justify-between' },
              React.createElement('h1', { className: 'text-2xl font-bold text-blue-400' }, 'âœï¸ Edit Consumable'),
              React.createElement('button', { onClick: () => { setShowEditConsumable(false); setSelectedConsumableToEdit(null); }, className: 'bg-gray-600 text-white px-4 py-2 rounded border-0 cursor-pointer' }, 'Back')
            )
          ),
          React.createElement('div', { className: 'max-w-6xl mx-auto p-6' },
            React.createElement('div', { className: 'bg-slate-700 border border-blue-500/30 rounded-lg p-6' },
              React.createElement('div', { className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6' },
                React.createElement('div', null, React.createElement('label', { className: 'text-gray-300 block mb-1 text-sm font-bold' }, 'Item Name'), React.createElement('input', { type: 'text', value: editingConsumable.name, onChange: (e) => setEditingConsumable({ ...editingConsumable, name: e.target.value }), className: 'w-full bg-slate-600 text-white rounded px-4 py-2 border-0' })),
                React.createElement('div', null, React.createElement('label', { className: 'text-gray-300 block mb-1 text-sm font-bold' }, 'Category'), React.createElement('input', { type: 'text', value: editingConsumable.category, onChange: (e) => setEditingConsumable({ ...editingConsumable, category: e.target.value }), className: 'w-full bg-slate-600 text-white rounded px-4 py-2 border-0' })),
                React.createElement('div', null, React.createElement('label', { className: 'text-gray-300 block mb-1 text-sm font-bold' }, 'Part Number'), React.createElement('input', { type: 'text', value: editingConsumable.partNumber, onChange: (e) => setEditingConsumable({ ...editingConsumable, partNumber: e.target.value }), className: 'w-full bg-slate-600 text-white rounded px-4 py-2 border-0' })),
                React.createElement('div', null, React.createElement('label', { className: 'text-gray-300 block mb-1 text-sm font-bold' }, 'Weight (kg)'), React.createElement('input', { type: 'text', value: editingConsumable.weight, onChange: (e) => setEditingConsumable({ ...editingConsumable, weight: e.target.value }), className: 'w-full bg-slate-600 text-white rounded px-4 py-2 border-0' })),
                React.createElement('div', null, React.createElement('label', { className: 'text-gray-300 block mb-1 text-sm font-bold' }, 'Length (mm)'), React.createElement('input', { type: 'text', value: editingConsumable.length, onChange: (e) => setEditingConsumable({ ...editingConsumable, length: e.target.value }), className: 'w-full bg-slate-600 text-white rounded px-4 py-2 border-0' })),
                React.createElement('div', null, React.createElement('label', { className: 'text-gray-300 block mb-1 text-sm font-bold' }, 'OD (mm)'), React.createElement('input', { type: 'text', value: editingConsumable.od, onChange: (e) => setEditingConsumable({ ...editingConsumable, od: e.target.value }), className: 'w-full bg-slate-600 text-white rounded px-4 py-2 border-0' })),
                React.createElement('div', null, React.createElement('label', { className: 'text-gray-300 block mb-1 text-sm font-bold' }, 'Pin Size/Thread'), React.createElement('input', { type: 'text', value: editingConsumable.pinSize, onChange: (e) => setEditingConsumable({ ...editingConsumable, pinSize: e.target.value }), className: 'w-full bg-slate-600 text-white rounded px-4 py-2 border-0' })),
                React.createElement('div', null, React.createElement('label', { className: 'text-gray-300 block mb-1 text-sm font-bold' }, 'Box Size/Thread'), React.createElement('input', { type: 'text', value: editingConsumable.boxSize, onChange: (e) => setEditingConsumable({ ...editingConsumable, boxSize: e.target.value }), className: 'w-full bg-slate-600 text-white rounded px-4 py-2 border-0' })),
                React.createElement('div', null, React.createElement('label', { className: 'text-gray-300 block mb-1 text-sm font-bold' }, 'ðŸ“¸ Update Photo'), React.createElement('input', { type: 'file', accept: 'image/*', onChange: (e) => handlePhotoUpload(e, 'edit'), className: 'block w-full text-white text-sm' }))
              ),
              editingConsumable.photo && React.createElement('div', { className: 'mb-6 text-center' },
                React.createElement('h4', { className: 'text-blue-300 font-bold mb-2' }, 'Current Photo:'),
                React.createElement('img', { src: editingConsumable.photo, className: 'w-32 h-32 object-cover rounded mx-auto' })
              ),
              React.createElement('div', { className: 'bg-slate-600/50 p-4 rounded mb-6' },
                React.createElement('h4', { className: 'text-blue-300 font-bold mb-3' }, 'ðŸ“‹ Specifications:'),
                React.createElement('div', { className: 'grid grid-cols-3 gap-3 text-sm' },
                  React.createElement('div', { className: 'text-gray-300' }, 'Weight: ', React.createElement('span', { className: 'text-white' }, editingConsumable.weight || '-')),
                  React.createElement('div', { className: 'text-gray-300' }, 'Length: ', React.createElement('span', { className: 'text-white' }, editingConsumable.length || '-')),
                  React.createElement('div', { className: 'text-gray-300' }, 'OD: ', React.createElement('span', { className: 'text-white' }, editingConsumable.od || '-')),
                  React.createElement('div', { className: 'text-gray-300' }, 'Pin: ', React.createElement('span', { className: 'text-white' }, editingConsumable.pinSize || '-')),
                  React.createElement('div', { className: 'text-gray-300' }, 'Box: ', React.createElement('span', { className: 'text-white' }, editingConsumable.boxSize || '-'))
                )
              ),
              React.createElement('button', { onClick: saveEditConsumable, className: 'w-full bg-green-600 hover:bg-green-500 text-white py-3 rounded font-bold border-0 cursor-pointer' }, 'âœ“ Save Changes')
            )
          )
        );
      }

      // ==================== ADD CONSUMABLE ====================
      if (adminMode && showAddConsumable) {
        return React.createElement('div', { className: 'min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 text-white' },
          React.createElement('nav', { className: 'bg-slate-900 border-b border-blue-500/30 p-4' },
            React.createElement('div', { className: 'max-w-6xl mx-auto flex justify-between' },
              React.createElement('h1', { className: 'text-2xl font-bold text-blue-400' }, 'âž• Add Consumable'),
              React.createElement('button', { onClick: () => setShowAddConsumable(false), className: 'bg-gray-600 text-white px-4 py-2 rounded border-0 cursor-pointer' }, 'Back')
            )
          ),
          React.createElement('div', { className: 'max-w-6xl mx-auto p-6' },
            React.createElement('div', { className: 'bg-slate-700 border border-blue-500/30 rounded-lg p-6' },
              React.createElement('div', { className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6' },
                React.createElement('div', null, React.createElement('label', { className: 'text-gray-300 block mb-1 text-sm font-bold' }, 'Item Name'), React.createElement('input', { type: 'text', placeholder: 'e.g., Shock Sub: Montrae 4600', value: newConsumable.name, onChange: (e) => setNewConsumable({ ...newConsumable, name: e.target.value }), className: 'w-full bg-slate-600 text-white rounded px-4 py-2 border-0' })),
                React.createElement('div', null, React.createElement('label', { className: 'text-gray-300 block mb-1 text-sm font-bold' }, 'Category'), React.createElement('input', { type: 'text', placeholder: 'e.g., Shock Sub', value: newConsumable.category, onChange: (e) => setNewConsumable({ ...newConsumable, category: e.target.value }), className: 'w-full bg-slate-600 text-white rounded px-4 py-2 border-0' })),
                React.createElement('div', null, React.createElement('label', { className: 'text-gray-300 block mb-1 text-sm font-bold' }, 'Part Number'), React.createElement('input', { type: 'text', value: newConsumable.partNumber, onChange: (e) => setNewConsumable({ ...newConsumable, partNumber: e.target.value }), className: 'w-full bg-slate-600 text-white rounded px-4 py-2 border-0' })),
                React.createElement('div', null, React.createElement('label', { className: 'text-gray-300 block mb-1 text-sm font-bold' }, 'Weight (kg)'), React.createElement('input', { type: 'text', value: newConsumable.weight, onChange: (e) => setNewConsumable({ ...newConsumable, weight: e.target.value }), className: 'w-full bg-slate-600 text-white rounded px-4 py-2 border-0' })),
                React.createElement('div', null, React.createElement('label', { className: 'text-gray-300 block mb-1 text-sm font-bold' }, 'Length (mm)'), React.createElement('input', { type: 'text', value: newConsumable.length, onChange: (e) => setNewConsumable({ ...newConsumable, length: e.target.value }), className: 'w-full bg-slate-600 text-white rounded px-4 py-2 border-0' })),
                React.createElement('div', null, React.createElement('label', { className: 'text-gray-300 block mb-1 text-sm font-bold' }, 'OD (mm)'), React.createElement('input', { type: 'text', value: newConsumable.od, onChange: (e) => setNewConsumable({ ...newConsumable, od: e.target.value }), className: 'w-full bg-slate-600 text-white rounded px-4 py-2 border-0' })),
                React.createElement('div', null, React.createElement('label', { className: 'text-gray-300 block mb-1 text-sm font-bold' }, 'Pin Size/Thread'), React.createElement('input', { type: 'text', value: newConsumable.pinSize, onChange: (e) => setNewConsumable({ ...newConsumable, pinSize: e.target.value }), className: 'w-full bg-slate-600 text-white rounded px-4 py-2 border-0' })),
                React.createElement('div', null, React.createElement('label', { className: 'text-gray-300 block mb-1 text-sm font-bold' }, 'Box Size/Thread'), React.createElement('input', { type: 'text', value: newConsumable.boxSize, onChange: (e) => setNewConsumable({ ...newConsumable, boxSize: e.target.value }), className: 'w-full bg-slate-600 text-white rounded px-4 py-2 border-0' })),
                React.createElement('div', null, React.createElement('label', { className: 'text-gray-300 block mb-1 text-sm font-bold' }, 'ðŸ“¸ Upload Photo'), React.createElement('input', { type: 'file', accept: 'image/*', onChange: (e) => handlePhotoUpload(e, 'consumable'), className: 'block w-full text-white text-sm' }))
              ),
              newConsumable.photo && React.createElement('div', { className: 'mb-6 text-center' }, React.createElement('h4', { className: 'text-blue-300 font-bold mb-2' }, 'Photo Preview:'), React.createElement('img', { src: newConsumable.photo, className: 'w-32 h-32 object-cover rounded mx-auto' })),
              React.createElement('button', { onClick: addConsumable, className: 'w-full bg-green-600 hover:bg-green-500 text-white py-3 rounded font-bold border-0 cursor-pointer' }, 'âœ“ Add Item')
            )
          )
        );
      }

      // ==================== CREATE STRING ====================
      if (adminMode && showCreateString) {
        return React.createElement('div', { className: 'min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 text-white' },
          React.createElement('nav', { className: 'bg-slate-900 border-b border-blue-500/30 p-4' },
            React.createElement('div', { className: 'max-w-7xl mx-auto flex justify-between' },
              React.createElement('h1', { className: 'text-2xl font-bold text-blue-400' }, 'â›“ï¸ Create Drill String'),
              React.createElement('button', { onClick: () => { setShowCreateString(false); setNewStringComponents([]); }, className: 'bg-gray-600 text-white px-4 py-2 rounded border-0 cursor-pointer' }, 'Back')
            )
          ),
          React.createElement('div', { className: 'max-w-7xl mx-auto p-6' },
            React.createElement('div', { className: 'grid grid-cols-1 lg:grid-cols-3 gap-6' },
              React.createElement('div', { className: 'lg:col-span-2' },
                React.createElement('div', { className: 'bg-slate-700 border border-blue-500/30 rounded-lg p-6' },
                  React.createElement('h3', { className: 'text-xl font-bold text-blue-400 mb-4' }, 'ðŸ“ String Details'),
                  React.createElement('input', { type: 'text', placeholder: 'String name', value: newStringName, onChange: (e) => setNewStringName(e.target.value), className: 'w-full bg-slate-600 text-white rounded px-4 py-2 mb-4 border-0' }),
                  React.createElement('select', { value: newStringDrillType, onChange: (e) => setNewStringDrillType(e.target.value), className: 'w-full bg-slate-600 text-white rounded px-4 py-2 mb-4 border-0' },
                    React.createElement('option', null, 'Epiroc D65'),
                    React.createElement('option', null, 'CAT MD6250')
                  ),
                  React.createElement('h4', { className: 'text-blue-300 font-bold mb-3' }, 'ðŸ§© Available Components (All 37 Approved Items)'),
                  React.createElement('select', {
                    onChange: (e) => {
                      const comp = consumables.find(c => c.id === parseInt(e.target.value));
                      if (comp && !newStringComponents.some(c => c.id === comp.id)) {
                        setNewStringComponents([...newStringComponents, comp]);
                      }
                      e.target.value = '';
                    },
                    className: 'w-full bg-slate-600 text-white rounded px-4 py-2 mb-4 border-0'
                  },
                    React.createElement('option', { value: '' }, '-- Select component --'),
                    consumables.map(c => React.createElement('option', { key: c.id, value: c.id }, `${c.name}`))
                  ),
                  React.createElement('div', { className: 'space-y-2 mb-4 max-h-96 overflow-y-auto' },
                    newStringComponents.map((comp, idx) =>
                      React.createElement('div', { key: idx, className: 'bg-slate-600/50 p-3 rounded flex flex-col border border-blue-400' },
                        React.createElement('div', { className: 'flex justify-between items-start mb-2' },
                          React.createElement('div', null,
                            React.createElement('div', { className: 'text-blue-300 font-bold text-sm' }, `${idx + 1}. ${comp.name}`),
                            React.createElement('div', { className: 'text-xs text-gray-400' }, `${comp.category} | ${comp.weight}kg`)
                          ),
                          React.createElement('button', { onClick: () => setNewStringComponents(newStringComponents.filter((_, i) => i !== idx)), className: 'text-red-400 hover:text-red-300 font-bold border-0 cursor-pointer' }, 'âœ•')
                        ),
                        comp.photo && React.createElement('img', { src: comp.photo, className: 'w-full h-32 object-contain rounded mt-2' })
                      )
                    )
                  ),
                  React.createElement('button', { onClick: createDrillString, className: 'w-full bg-green-600 hover:bg-green-500 text-white py-3 rounded font-bold border-0 cursor-pointer' }, 'âœ“ Create String')
                )
              ),
              React.createElement('div', { className: 'bg-slate-700 border border-blue-500/30 rounded-lg p-6 sticky top-6' },
                React.createElement('h4', { className: 'text-blue-300 font-bold mb-4' }, 'ðŸ‘€ String Assembly Preview'),
                React.createElement('div', { className: 'flex flex-col items-center gap-2 min-h-96 bg-slate-600/30 p-4 rounded overflow-y-auto' },
                  newStringComponents.length === 0 && React.createElement('p', { className: 'text-gray-400 text-sm mt-10' }, 'Add components to preview'),
                  newStringComponents.map((comp, idx) =>
                    React.createElement('div', { key: idx, className: 'w-full max-w-xs bg-slate-600 rounded border border-blue-400 p-4 flex flex-col items-center' },
                      React.createElement('div', { className: 'text-xs text-gray-400 mb-2' }, `${idx + 1}. ${comp.category}`),
                      comp.photo ? 
                        React.createElement('img', { src: comp.photo, className: 'w-full h-32 object-contain rounded mb-2' })
                        :
                        React.createElement('div', { className: 'w-full h-32 bg-slate-500 rounded flex items-center justify-center mb-2' }, React.createElement('span', { className: 'text-xs text-gray-400' }, 'No photo')),
                      React.createElement('div', { className: 'text-xs text-white font-bold text-center' }, comp.name),
                      React.createElement('div', { className: 'text-xs text-gray-300 mt-1' }, `${comp.weight}kg`)
                    )
                  )
                )
              )
            )
          )
        );
      }

      // ==================== ADD DRILL ====================
      if (adminMode && showAddDrill) {
        return React.createElement('div', { className: 'min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 text-white' },
          React.createElement('nav', { className: 'bg-slate-900 border-b border-blue-500/30 p-4' },
            React.createElement('div', { className: 'max-w-4xl mx-auto flex justify-between' },
              React.createElement('h1', { className: 'text-2xl font-bold text-blue-400' }, 'âž• Add New Drill'),
              React.createElement('button', { onClick: () => setShowAddDrill(false), className: 'bg-gray-600 text-white px-4 py-2 rounded border-0 cursor-pointer' }, 'Back')
            )
          ),
          React.createElement('div', { className: 'max-w-4xl mx-auto p-6' },
            React.createElement('div', { className: 'bg-slate-700 border border-blue-500/30 rounded-lg p-6' },
              React.createElement('div', { className: 'grid grid-cols-1 md:grid-cols-2 gap-4 mb-4' },
                React.createElement('input', { type: 'text', placeholder: 'Drill ID (e.g., DR301)', value: newDrillId, onChange: (e) => setNewDrillId(e.target.value), className: 'bg-slate-600 text-white rounded px-4 py-2 border-0' }),
                React.createElement('select', { value: newDrillType, onChange: (e) => setNewDrillType(e.target.value), className: 'bg-slate-600 text-white rounded px-4 py-2 border-0' },
                  React.createElement('option', null, 'Epiroc D65'),
                  React.createElement('option', null, 'CAT MD6250')
                ),
                React.createElement('div', { className: 'md:col-span-2' }, React.createElement('label', { className: 'text-gray-300 block mb-2' }, 'ðŸ“¸ Drill Photo'), React.createElement('input', { type: 'file', accept: 'image/*', onChange: (e) => handlePhotoUpload(e, 'drill'), className: 'block w-full text-white' }))
              ),
              newDrillPhoto && React.createElement('div', { className: 'mb-4 text-center' }, React.createElement('img', { src: newDrillPhoto, className: 'w-32 h-32 object-cover rounded mx-auto' })),
              React.createElement('button', { onClick: addDrill, className: 'w-full bg-green-600 hover:bg-green-500 text-white py-2 rounded font-bold border-0 cursor-pointer' }, 'âœ“ Add Drill')
            )
          )
        );
      }

      // ==================== ADMIN PANEL ====================
      if (adminMode) {
        return React.createElement('div', { className: 'min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 text-white' },
          React.createElement('nav', { className: 'bg-slate-900 border-b border-blue-500/30 p-4' },
            React.createElement('div', { className: 'max-w-7xl mx-auto flex justify-between items-center' },
              React.createElement('div', { className: 'flex items-center gap-4' },
                logoImage && React.createElement('img', { src: logoImage, style: { maxWidth: '150px', maxHeight: '100px', objectFit: 'contain' } }),
                React.createElement('h1', { className: 'text-2xl font-bold text-blue-400' }, 'âš™ï¸ Admin Panel')
              ),
              React.createElement('button', { onClick: handleLogout, className: 'bg-red-600 hover:bg-red-500 text-white px-4 py-2 rounded font-bold border-0 cursor-pointer' }, 'Logout')
            )
          ),
          React.createElement('div', { className: 'max-w-7xl mx-auto p-6' },
            React.createElement('div', { className: 'flex gap-2 mb-6 flex-wrap' },
              React.createElement('button', { onClick: () => setAdminTab('strings'), className: `px-4 py-2 rounded font-bold border-0 cursor-pointer ${adminTab === 'strings' ? 'bg-blue-600' : 'bg-slate-600'}` }, 'â›“ï¸ Strings'),
              React.createElement('button', { onClick: () => setAdminTab('consumables'), className: `px-4 py-2 rounded font-bold border-0 cursor-pointer ${adminTab === 'consumables' ? 'bg-blue-600' : 'bg-slate-600'}` }, `ðŸ§© Consumables (${consumables.length})`),
              React.createElement('button', { onClick: () => setAdminTab('drills'), className: `px-4 py-2 rounded font-bold border-0 cursor-pointer ${adminTab === 'drills' ? 'bg-blue-600' : 'bg-slate-600'}` }, 'â›ï¸ Drills'),
              React.createElement('button', { onClick: () => setAdminTab('logo'), className: `px-4 py-2 rounded font-bold border-0 cursor-pointer ${adminTab === 'logo' ? 'bg-blue-600' : 'bg-slate-600'}` }, 'ðŸŽ¨ Logo')
            ),

            // STRINGS TAB
            adminTab === 'strings' && React.createElement('div', { className: 'space-y-4' },
              React.createElement('button', { onClick: () => setShowCreateString(true), className: 'w-full bg-green-600 hover:bg-green-500 text-white py-3 rounded-lg font-bold border-0 cursor-pointer' }, 'âž• Create New String'),
              React.createElement('div', { className: 'bg-slate-700 border border-blue-500/30 rounded-lg p-6' },
                React.createElement('h3', { className: 'text-xl font-bold text-blue-400 mb-4' }, 'ðŸ“‹ Authorised Strings'),
                Object.values(authorisedStrings).length === 0 ?
                  React.createElement('p', { className: 'text-gray-400' }, 'No strings created')
                  :
                  React.createElement('div', { className: 'space-y-3' },
                    Object.values(authorisedStrings).map((str) =>
                      React.createElement('div', { key: str.id, className: 'bg-slate-600/50 p-4 rounded border border-slate-500' },
                        React.createElement('div', { className: 'font-bold text-blue-300 mb-1' }, str.name),
                        React.createElement('div', { className: 'text-xs text-gray-400' }, `Type: ${str.drillType} | ${str.components.length} components`),
                        React.createElement('button', { onClick: () => { const newStrings = { ...authorisedStrings }; delete newStrings[str.id]; setAuthorisedStrings(newStrings); }, className: 'text-red-400 text-sm mt-2 border-0 cursor-pointer hover:text-red-300' }, 'âœ• Delete')
                      )
                    )
                  )
              )
            ),

            // CONSUMABLES TAB
            adminTab === 'consumables' && React.createElement('div', { className: 'space-y-4' },
              React.createElement('button', { onClick: () => setShowAddConsumable(true), className: 'w-full bg-green-600 hover:bg-green-500 text-white py-3 rounded-lg font-bold border-0 cursor-pointer' }, 'âž• Add New Item'),
              React.createElement('div', { className: 'bg-blue-900/20 border border-blue-500/50 rounded-lg p-4 mb-4' },
                React.createElement('p', { className: 'text-blue-300 text-sm' }, `âœ“ 37 approved items | + ${consumables.length - 37} custom items`)
              ),
              React.createElement('div', { className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4' },
                consumables.map(cons =>
                  React.createElement('div', { key: cons.id, className: 'bg-slate-700 border border-blue-500/30 rounded-lg p-4' },
                    cons.photo && React.createElement('img', { src: cons.photo, className: 'w-full h-32 object-cover rounded mb-2' }),
                    React.createElement('div', { className: 'font-bold text-blue-300 text-sm mb-1' }, cons.name.length > 30 ? cons.name.substring(0, 30) + '...' : cons.name),
                    React.createElement('div', { className: 'text-xs text-gray-400 mb-2' }, cons.category),
                    React.createElement('div', { className: 'text-xs text-gray-500 space-y-1 mb-3' },
                      cons.weight && React.createElement('div', null, `Wt: ${cons.weight}kg`),
                      cons.od && React.createElement('div', null, `OD: ${cons.od}mm`),
                      cons.pinSize && React.createElement('div', null, `Pin: ${cons.pinSize.substring(0, 15)}`)
                    ),
                    React.createElement('div', { className: 'flex gap-2' },
                      React.createElement('button', { onClick: () => startEditConsumable(cons), className: 'flex-1 bg-blue-600 hover:bg-blue-500 text-white text-xs py-2 rounded border-0 cursor-pointer' }, 'âœï¸ Edit'),
                      React.createElement('button', { onClick: () => removeConsumable(cons.id), className: 'flex-1 bg-red-600 hover:bg-red-500 text-white text-xs py-2 rounded border-0 cursor-pointer' }, 'âœ• Remove')
                    )
                  )
                )
              )
            ),

            // DRILLS TAB
            adminTab === 'drills' && React.createElement('div', { className: 'space-y-4' },
              React.createElement('button', { onClick: () => setShowAddDrill(true), className: 'w-full bg-green-600 hover:bg-green-500 text-white py-3 rounded-lg font-bold border-0 cursor-pointer' }, 'âž• Add Drill'),
              React.createElement('div', { className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4' },
                Object.entries(drills).map(([rigId, drill]) =>
                  React.createElement('div', { key: rigId, className: 'bg-slate-700 border border-blue-500/30 rounded-lg p-4' },
                    drill.photo && React.createElement('img', { src: drill.photo, className: 'w-full h-32 object-cover rounded mb-2' }),
                    React.createElement('div', { className: 'font-bold text-blue-300 text-lg mb-2' }, rigId),
                    React.createElement('div', { className: 'text-xs text-gray-400 mb-3' }, drill.type),
                    React.createElement('div', { className: 'mt-2' },
                      React.createElement('label', { className: 'text-gray-300 block mb-1 text-xs' }, 'Update photo:'),
                      React.createElement('input', { type: 'file', accept: 'image/*', onChange: (e) => handleDrillPhotoUpload(rigId, e), className: 'block w-full text-white text-xs' })
                    ),
                    React.createElement('button', { onClick: () => removeDrill(rigId), className: 'text-red-400 text-sm mt-2 border-0 cursor-pointer hover:text-red-300' }, 'âœ• Remove Drill')
                  )
                )
              )
            ),

            // LOGO TAB
            adminTab === 'logo' && React.createElement('div', { className: 'space-y-4' },
              React.createElement('div', { className: 'bg-slate-700 border border-blue-500/30 rounded-lg p-6' },
                React.createElement('h3', { className: 'text-xl font-bold text-blue-400 mb-4' }, 'ðŸŽ¨ Company Logo'),
                logoImage && React.createElement('div', { className: 'mb-4 p-4 bg-slate-600/50 rounded text-center' },
                  React.createElement('h4', { className: 'text-blue-300 font-bold mb-3' }, 'Current Logo:'),
                  React.createElement('img', { src: logoImage, style: { maxWidth: '150px', maxHeight: '100px', objectFit: 'contain', margin: '0 auto 1rem' } }),
                  React.createElement('button', { onClick: removeLogo, className: 'bg-red-600 hover:bg-red-500 text-white px-4 py-2 rounded font-bold border-0 cursor-pointer' }, 'âœ• Remove Logo')
                ),
                React.createElement('div', { className: 'border-2 border-dashed border-blue-500/50 rounded-lg p-6 text-center' },
                  React.createElement('input', { type: 'file', accept: 'image/*', onChange: handleLogoUpload, className: 'block w-full text-white mb-2' })
                )
              )
            )
          )
        );
      }

      // ==================== RIG DETAIL ====================
      if (currentPage === 'detail') {
        const drill = drills[selectedRig];
        const assignedStringId = rigStringAssignments[selectedRig];
        const assignedString = assignedStringId ? authorisedStrings[assignedStringId] : null;
        const availableStrings = Object.values(authorisedStrings).filter(s => s.drillType === drill.type);

        return React.createElement('div', { className: 'min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 text-white' },
          React.createElement('nav', { className: 'bg-slate-900 border-b border-blue-500/30 p-4 sticky top-0' },
            React.createElement('div', { className: 'max-w-7xl mx-auto flex justify-between items-center' },
              React.createElement('div', { className: 'flex items-center gap-4' },
                logoImage && React.createElement('img', { src: logoImage, style: { maxWidth: '150px', maxHeight: '100px', objectFit: 'contain' } }),
                React.createElement('h1', { className: 'text-2xl font-bold text-blue-400' }, 'â›ï¸ Drill Rig Management')
              ),
              React.createElement('button', { onClick: () => setShowLoginPrompt(true), className: 'bg-red-600 text-white px-4 py-2 rounded font-bold border-0 cursor-pointer' }, 'ðŸ”“ Admin')
            )
          ),
          React.createElement('div', { className: 'max-w-7xl mx-auto p-6' },
            React.createElement('button', { onClick: () => setCurrentPage('fleet'), className: 'bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded font-bold mb-6 border-0 cursor-pointer' }, 'â† Back to Fleet'),
            React.createElement('div', { className: 'grid grid-cols-1 lg:grid-cols-3 gap-6' },
              React.createElement('div', { className: 'space-y-4' },
                React.createElement('div', { className: 'bg-slate-700 border border-blue-500/30 rounded-lg p-6' },
                  drill.photo && React.createElement('img', { src: drill.photo, className: 'w-full h-40 object-cover rounded mb-4' }),
                  React.createElement('h2', { className: 'text-3xl font-bold text-blue-400 mb-4' }, selectedRig),
                  React.createElement('div', { className: 'text-gray-300' },
                    React.createElement('div', { className: 'text-sm' }, drill.type)
                  )
                )
              ),
              React.createElement('div', { className: 'lg:col-span-2' },
                React.createElement('div', { className: 'bg-slate-700 border border-blue-500/30 rounded-lg p-6' },
                  React.createElement('h3', { className: 'text-2xl font-bold text-blue-400 mb-6' }, 'â›“ï¸ Authorised Drill String'),
                  assignedString ?
                    React.createElement('div', null,
                      React.createElement('div', { className: 'mb-4 p-4 bg-green-900/20 border border-green-500/30 rounded' },
                        React.createElement('div', { className: 'text-green-400 font-bold mb-3' }, `âœ“ Current: ${assignedString.name}`),
                        React.createElement('div', { className: 'flex gap-2' },
                          React.createElement('button', { onClick: () => window.print(), className: 'bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded border-0 cursor-pointer' }, 'ðŸ–¨ï¸ Print String'),
                          React.createElement('button', { onClick: () => { const newAssignments = { ...rigStringAssignments }; delete newAssignments[selectedRig]; setRigStringAssignments(newAssignments); }, className: 'bg-red-600 hover:bg-red-500 text-white px-4 py-2 rounded border-0 cursor-pointer' }, 'Remove String')
                        )
                      ),
                      React.createElement('div', { className: 'bg-slate-600/30 rounded p-8 mb-4' },
                        React.createElement('div', { className: 'flex flex-col items-center gap-3 min-h-96 overflow-y-auto p-4' },
                          assignedString.components.map((comp, idx) =>
                            React.createElement('div', { key: idx, className: 'w-full max-w-xs bg-slate-600 rounded border border-blue-400 p-3 flex flex-col items-center' },
                              React.createElement('div', { className: 'text-xs text-gray-400 mb-2' }, `${idx + 1}. ${comp.category}`),
                              comp.photo ?
                                React.createElement('img', { src: comp.photo, className: 'w-full h-40 object-contain rounded mb-2' })
                                :
                                React.createElement('div', { className: 'w-full h-40 bg-slate-500 rounded flex items-center justify-center mb-2' }, React.createElement('span', { className: 'text-xs text-gray-400' }, 'No photo')),
                              React.createElement('div', { className: 'text-xs text-white font-bold text-center' }, comp.name),
                              React.createElement('div', { className: 'text-xs text-gray-300 mt-1' }, `${comp.weight}kg | OD: ${comp.od}mm`)
                            )
                          )
                        )
                      )
                    )
                    :
                    React.createElement('div', null,
                      React.createElement('p', { className: 'text-gray-400 mb-4' }, 'No drill string assigned. Select one:'),
                      React.createElement('div', { className: 'space-y-2' },
                        availableStrings.length === 0 ?
                          React.createElement('p', { className: 'text-gray-500 text-sm' }, 'No strings available. Create one in admin.')
                          :
                          availableStrings.map((str) =>
                            React.createElement('button', { key: str.id, onClick: () => assignStringToRig(str.id), className: 'w-full text-left bg-slate-600 hover:bg-blue-600 p-3 rounded transition border-0 cursor-pointer' },
                              React.createElement('div', { className: 'font-bold text-blue-300' }, str.name),
                              React.createElement('div', { className: 'text-xs text-gray-400' }, `${str.components.length} components`)
                            )
                          )
                      )
                    )
                )
              )
            )
          )
        );
      }

      // ==================== FLEET DASHBOARD ====================
      return React.createElement('div', { className: 'min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 text-white' },
        React.createElement('nav', { className: 'bg-slate-900 border-b border-blue-500/30 p-4 sticky top-0' },
          React.createElement('div', { className: 'max-w-7xl mx-auto flex justify-between items-center' },
            React.createElement('div', { className: 'flex items-center gap-4' },
              logoImage && React.createElement('img', { src: logoImage, style: { maxWidth: '150px', maxHeight: '100px', objectFit: 'contain' } }),
              React.createElement('h1', { className: 'text-2xl font-bold text-blue-400' }, 'â›ï¸ Drill Rig Management')
            ),
            React.createElement('button', { onClick: () => setShowLoginPrompt(true), className: 'bg-red-600 text-white px-4 py-2 rounded font-bold border-0 cursor-pointer' }, 'ðŸ”“ Admin')
          )
        ),
        React.createElement('div', { className: 'max-w-7xl mx-auto p-6' },
          React.createElement('h2', { className: 'text-3xl font-bold text-blue-400 mb-6' }, 'ðŸ“Š Fleet Dashboard - Pilgangoora'),
          React.createElement('div', { className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4' },
            Object.entries(drills).map(([rigId, drill]) => {
              const assignedStringId = rigStringAssignments[rigId];
              const assignedString = assignedStringId ? authorisedStrings[assignedStringId] : null;
              const stringFirstWord = assignedString ? assignedString.name.split(' ')[0] : null;
              return React.createElement('div', { key: rigId, onClick: () => { setSelectedRig(rigId); setCurrentPage('detail'); }, className: 'bg-slate-700 border border-blue-500/30 rounded-lg p-4 cursor-pointer hover:border-blue-400 hover:shadow-lg transition' },
                drill.photo && React.createElement('img', { src: drill.photo, className: 'w-full h-40 object-cover rounded mb-2' }),
                React.createElement('div', { className: 'font-bold text-blue-400 text-lg mb-2' }, rigId),
                React.createElement('div', { className: 'text-sm text-gray-300 mb-3' }, drill.type),
                stringFirstWord && React.createElement('div', { className: 'text-sm text-green-400 font-bold' }, `ðŸ“‹ ${stringFirstWord}`),
                React.createElement('div', { className: 'mt-3 text-xs text-gray-400' }, 'â†’ Click to manage')
              );
            })
          )
        )
      );
    }

    const root = createRoot(document.getElementById('root'));
    root.render(React.createElement(App));
  </script>
</body>
</html>
