<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Drill Rig Management System - Pilgangoora</title>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @media print {
      body { margin: 0; padding: 0; background: white; }
      .no-print { display: none !important; }
      .print-only { display: block !important; }
    }
    .print-only { display: none; }
    .drill-photo { width: 150px; height: 150px; object-fit: cover; border-radius: 8px; }
    .component-tile { transition: transform 0.2s; }
    .component-tile:hover { transform: scale(1.05); }
    .logo-display { max-width: 150px; max-height: 100px; object-fit: contain; }
    .logo-print { max-width: 120px; max-height: 80px; object-fit: contain; }
  </style>
</head>
<body>
  <div id="root"></div>

  <script>
    const { useState, useEffect } = React;

    function App() {
      // ==================== STATE ====================
      const [currentPage, setCurrentPage] = useState('fleet');
      const [selectedRig, setSelectedRig] = useState('DR201');
      const [adminMode, setAdminMode] = useState(false);
      const [adminPassword, setAdminPassword] = useState('admin123');
      const [showLoginPrompt, setShowLoginPrompt] = useState(false);
      const [loginAttempt, setLoginAttempt] = useState('');

      // Logo State
      const [logoImage, setLogoImage] = useState(() => {
        const saved = localStorage.getItem('companyLogo');
        return saved ? saved : null;
      });

      // Consumables Database
      const [consumables, setConsumables] = useState(() => {
        const saved = localStorage.getItem('consumables');
        return saved ? JSON.parse(saved) : [];
      });

      // Drills Database
      const [drills, setDrills] = useState(() => {
        const saved = localStorage.getItem('drills');
        return saved ? JSON.parse(saved) : {
          'DR201': { type: 'Epiroc D65', location: 'Collar Zone', status: 'Active', hours: 2847, photo: null },
          'DR202': { type: 'Epiroc D65', location: 'Overburden', status: 'Active', hours: 2934, photo: null },
          'DR203': { type: 'Epiroc D65', location: 'Production', status: 'Active', hours: 3102, photo: null },
          'DR204': { type: 'Epiroc D65', location: 'Production', status: 'Active', hours: 2756, photo: null },
          'DR205': { type: 'Epiroc D65', location: 'Production', status: 'Standby', hours: 1829, photo: null },
          'DR206': { type: 'Epiroc D65', location: 'Production', status: 'Active', hours: 2645, photo: null },
          'DR207': { type: 'Epiroc D65', location: 'Wall Control', status: 'Active', hours: 2234, photo: null },
          'DR208': { type: 'CAT MD6250', location: 'Production', status: 'Active', hours: 2987, photo: null },
          'DR209': { type: 'Epiroc D65', location: 'Production', status: 'Active', hours: 3045, photo: null },
          'DR210': { type: 'Epiroc D65', location: 'Deep Prod', status: 'Active', hours: 2123, photo: null },
          'DR211': { type: 'CAT MD6250', location: 'Production', status: 'Active', hours: 2876, photo: null },
          'DR212': { type: 'Epiroc D65', location: 'Production', status: 'Active', hours: 2645, photo: null },
          'DR213': { type: 'Epiroc D65', location: 'Production', status: 'Active', hours: 2734, photo: null },
          'DR214': { type: 'Epiroc D65', location: 'Wall Control', status: 'Maintenance', hours: 1456, photo: null },
        };
      });

      // Authorised Strings - Initialize with test string for DR201
      const [authorisedStrings, setAuthorisedStrings] = useState(() => {
        const saved = localStorage.getItem('authorisedStrings');
        return saved ? JSON.parse(saved) : {};
      });

      // Rig String Assignments - Initialize with DR201 having test string
      const [rigStringAssignments, setRigStringAssignments] = useState(() => {
        const saved = localStorage.getItem('rigStringAssignments');
        if (saved) {
          return JSON.parse(saved);
        }
        // Initialize with empty - no default assignments
        return {};
      });

      // Admin Forms
      const [adminTab, setAdminTab] = useState('strings');
      const [showCreateString, setShowCreateString] = useState(false);
      const [showAddConsumable, setShowAddConsumable] = useState(false);
      const [showAddDrill, setShowAddDrill] = useState(false);

      // Form inputs for consumable
      const [newConsumable, setNewConsumable] = useState({ 
        name: '', 
        category: '', 
        partNumber: '',
        weight: '',
        length: '',
        od: '',
        pinSize: '',
        pinThread: '',
        boxSize: '',
        boxThread: '',
        photo: null 
      });

      const [newStringName, setNewStringName] = useState('');
      const [newStringDrillType, setNewStringDrillType] = useState('Epiroc D65');
      const [newStringComponents, setNewStringComponents] = useState([]);

      const [newDrillId, setNewDrillId] = useState('DR301');
      const [newDrillType, setNewDrillType] = useState('Epiroc D65');
      const [newDrillLocation, setNewDrillLocation] = useState('');
      const [newDrillPhoto, setNewDrillPhoto] = useState(null);

      // Save to localStorage
      useEffect(() => {
        localStorage.setItem('consumables', JSON.stringify(consumables));
      }, [consumables]);

      useEffect(() => {
        localStorage.setItem('drills', JSON.stringify(drills));
      }, [drills]);

      useEffect(() => {
        localStorage.setItem('authorisedStrings', JSON.stringify(authorisedStrings));
      }, [authorisedStrings]);

      useEffect(() => {
        localStorage.setItem('rigStringAssignments', JSON.stringify(rigStringAssignments));
      }, [rigStringAssignments]);

      useEffect(() => {
        if (logoImage) {
          localStorage.setItem('companyLogo', logoImage);
        }
      }, [logoImage]);

      // ==================== HANDLERS ====================
      const handleAdminLogin = () => {
        if (loginAttempt === adminPassword) {
          setAdminMode(true);
          setShowLoginPrompt(false);
          setLoginAttempt('');
        } else {
          alert('‚ùå Incorrect password');
          setLoginAttempt('');
        }
      };

      const handleLogout = () => {
        setAdminMode(false);
        setAdminTab('strings');
      };

      const handleLogoUpload = (e) => {
        const file = e.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onloadend = () => {
            setLogoImage(reader.result);
            alert('‚úì Logo uploaded!');
          };
          reader.readAsDataURL(file);
        }
      };

      const removeLogo = () => {
        if (confirm('Remove logo?')) {
          setLogoImage(null);
          localStorage.removeItem('companyLogo');
          alert('‚úì Logo removed');
        }
      };

      const createDrillString = () => {
        if (!newStringName.trim()) {
          alert('Enter string name');
          return;
        }
        if (newStringComponents.length === 0) {
          alert('Add at least one component');
          return;
        }
        const stringId = Date.now().toString();
        setAuthorisedStrings({
          ...authorisedStrings,
          [stringId]: {
            id: stringId,
            name: newStringName,
            drillType: newStringDrillType,
            components: newStringComponents,
            created: new Date().toLocaleDateString()
          }
        });
        alert(`‚úì String created!`);
        setNewStringName('');
        setNewStringComponents([]);
        setShowCreateString(false);
      };

      const addConsumable = () => {
        if (!newConsumable.name.trim()) {
          alert('Enter consumable name');
          return;
        }
        setConsumables([...consumables, { id: Date.now(), ...newConsumable }]);
        alert('‚úì Consumable added!');
        setNewConsumable({ 
          name: '', 
          category: '', 
          partNumber: '',
          weight: '',
          length: '',
          od: '',
          pinSize: '',
          pinThread: '',
          boxSize: '',
          boxThread: '',
          photo: null 
        });
        setShowAddConsumable(false);
      };

      const removeConsumable = (id) => {
        if (confirm('Remove this consumable?')) {
          setConsumables(consumables.filter(c => c.id !== id));
        }
      };

      const addDrill = () => {
        if (!newDrillId.trim()) {
          alert('Enter drill ID');
          return;
        }
        const newDrillsData = {
          ...drills,
          [newDrillId]: {
            type: newDrillType,
            location: newDrillLocation,
            status: 'Active',
            hours: 0,
            photo: newDrillPhoto
          }
        };
        setDrills(newDrillsData);
        alert(`‚úì Drill ${newDrillId} added!`);
        setNewDrillId('');
        setNewDrillLocation('');
        setNewDrillPhoto(null);
        setShowAddDrill(false);
      };

      const removeDrill = (rigId) => {
        if (confirm(`Remove drill ${rigId}?`)) {
          const newDrillsData = { ...drills };
          delete newDrillsData[rigId];
          setDrills(newDrillsData);
        }
      };

      const handlePhotoUpload = (e, isConsumable = false, isDrill = false) => {
        const file = e.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onloadend = () => {
            if (isConsumable) {
              setNewConsumable({ ...newConsumable, photo: reader.result });
            } else if (isDrill) {
              setNewDrillPhoto(reader.result);
            }
          };
          reader.readAsDataURL(file);
        }
      };

      const handleDrillPhotoUpload = (rigId, e) => {
        const file = e.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onloadend = () => {
            setDrills({
              ...drills,
              [rigId]: { ...drills[rigId], photo: reader.result }
            });
          };
          reader.readAsDataURL(file);
        }
      };

      const assignStringToRig = (stringId) => {
        setRigStringAssignments({
          ...rigStringAssignments,
          [selectedRig]: stringId
        });
        alert(`‚úì String assigned to ${selectedRig}`);
      };

      // ==================== LOGIN SCREEN ====================
      if (showLoginPrompt) {
        return React.createElement('div', { className: 'min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 flex items-center justify-center p-4' },
          React.createElement('div', { className: 'bg-gradient-to-br from-slate-800 to-slate-900 border border-red-500/30 rounded-lg p-8 max-w-sm w-full' },
            React.createElement('h2', { className: 'text-2xl font-bold text-red-400 mb-6 text-center' }, 'üîì Admin Login'),
            React.createElement('input', {
              type: 'password',
              placeholder: 'Password',
              value: loginAttempt,
              onChange: (e) => setLoginAttempt(e.target.value),
              onKeyPress: (e) => e.key === 'Enter' && handleAdminLogin(),
              className: 'w-full bg-slate-600 text-white rounded px-4 py-2 mb-4'
            }),
            React.createElement('button', {
              onClick: handleAdminLogin,
              className: 'w-full bg-red-600 hover:bg-red-500 text-white py-2 rounded font-bold mb-2'
            }, 'Login'),
            React.createElement('button', {
              onClick: () => setShowLoginPrompt(false),
              className: 'w-full bg-gray-600 hover:bg-gray-500 text-white py-2 rounded font-bold'
            }, 'Cancel')
          )
        );
      }

      // ==================== ADMIN - CREATE STRING ====================
      if (adminMode && showCreateString) {
        return React.createElement('div', { className: 'min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 text-white' },
          React.createElement('nav', { className: 'bg-slate-900 border-b border-blue-500/30 p-4' },
            React.createElement('div', { className: 'max-w-7xl mx-auto flex justify-between' },
              React.createElement('h1', { className: 'text-2xl font-bold text-blue-400' }, '‚õìÔ∏è Create Drill String'),
              React.createElement('button', {
                onClick: () => { setShowCreateString(false); setNewStringComponents([]); },
                className: 'bg-gray-600 text-white px-4 py-2 rounded'
              }, 'Back')
            )
          ),
          React.createElement('div', { className: 'max-w-7xl mx-auto p-6' },
            React.createElement('div', { className: 'grid grid-cols-1 lg:grid-cols-3 gap-6' },
              React.createElement('div', { className: 'lg:col-span-2 space-y-4' },
                React.createElement('div', { className: 'bg-gradient-to-br from-slate-700 to-slate-800 border border-blue-500/30 rounded-lg p-6' },
                  React.createElement('h3', { className: 'text-xl font-bold text-blue-400 mb-4' }, 'üìù String Details'),
                  React.createElement('input', {
                    type: 'text',
                    placeholder: 'String name',
                    value: newStringName,
                    onChange: (e) => setNewStringName(e.target.value),
                    className: 'w-full bg-slate-600 text-white rounded px-4 py-2 mb-4'
                  }),
                  React.createElement('select', {
                    value: newStringDrillType,
                    onChange: (e) => setNewStringDrillType(e.target.value),
                    className: 'w-full bg-slate-600 text-white rounded px-4 py-2 mb-4'
                  },
                    React.createElement('option', null, 'Epiroc D65'),
                    React.createElement('option', null, 'CAT MD6250')
                  ),
                  React.createElement('h4', { className: 'text-blue-300 font-bold mb-3' }, 'üß© Add Components'),
                  React.createElement('div', { className: 'mb-4' },
                    React.createElement('select', {
                      onChange: (e) => {
                        const comp = consumables.find(c => c.id === parseInt(e.target.value));
                        if (comp) {
                          setNewStringComponents([...newStringComponents, comp]);
                          e.target.value = '';
                        }
                      },
                      className: 'w-full bg-slate-600 text-white rounded px-4 py-2'
                    },
                      React.createElement('option', { value: '' }, 'Select component...'),
                      consumables.map(c =>
                        React.createElement('option', { key: c.id, value: c.id }, 
                          `${c.name} (${c.category})`)
                      )
                    )
                  ),
                  React.createElement('div', { className: 'space-y-2' },
                    newStringComponents.map((comp, idx) =>
                      React.createElement('div', { key: idx, className: 'bg-slate-600/50 p-3 rounded flex justify-between items-center' },
                        React.createElement('div', null,
                          React.createElement('div', { className: 'font-bold text-blue-300' }, `${idx + 1}. ${comp.name}`),
                          comp.photo && React.createElement('img', {
                            src: comp.photo,
                            className: 'w-16 h-16 mt-1 rounded object-cover'
                          })
                        ),
                        React.createElement('button', {
                          onClick: () => setNewStringComponents(newStringComponents.filter((_, i) => i !== idx)),
                          className: 'text-red-400 hover:text-red-300 font-bold'
                        }, '‚úï')
                      )
                    )
                  )
                ),
                React.createElement('button', {
                  onClick: createDrillString,
                  className: 'w-full bg-green-600 hover:bg-green-500 text-white py-3 rounded font-bold text-lg'
                }, '‚úì Create String')
              ),
              React.createElement('div', { className: 'lg:col-span-1' },
                React.createElement('div', { className: 'bg-gradient-to-br from-slate-700 to-slate-800 border border-blue-500/30 rounded-lg p-6 sticky top-6' },
                  React.createElement('h4', { className: 'text-blue-400 font-bold mb-4' }, 'üëÄ Component Stack Preview'),
                  React.createElement('div', { className: 'flex flex-col items-center gap-1 min-h-64' },
                    newStringComponents.length === 0 && React.createElement('p', { className: 'text-gray-400 text-sm text-center' }, 'Add components to see preview'),
                    newStringComponents.map((comp, idx) =>
                      React.createElement('div', {
                        key: idx,
                        className: 'w-24 h-12 rounded text-xs text-center py-1 bg-gradient-to-b from-blue-600 to-blue-700 text-white font-bold shadow-lg flex items-center justify-center'
                      }, comp.name.split(' ')[0])
                    )
                  )
                )
              )
            )
          )
        );
      }

      // ==================== ADMIN - ADD CONSUMABLE ====================
      if (adminMode && showAddConsumable) {
        return React.createElement('div', { className: 'min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 text-white' },
          React.createElement('nav', { className: 'bg-slate-900 border-b border-blue-500/30 p-4' },
            React.createElement('div', { className: 'max-w-6xl mx-auto' },
              React.createElement('button', {
                onClick: () => setShowAddConsumable(false),
                className: 'bg-gray-600 text-white px-4 py-2 rounded'
              }, 'Back')
            )
          ),
          React.createElement('div', { className: 'max-w-6xl mx-auto p-6' },
            React.createElement('div', { className: 'bg-gradient-to-br from-slate-700 to-slate-800 border border-blue-500/30 rounded-lg p-6' },
              React.createElement('h2', { className: 'text-2xl font-bold text-blue-400 mb-6' }, '‚ûï Add Consumable Item'),
              
              React.createElement('div', { className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6' },
                // Basic Info
                React.createElement('div', null,
                  React.createElement('label', { className: 'text-gray-300 block mb-1 text-sm font-bold' }, 'Item Name *'),
                  React.createElement('input', {
                    type: 'text',
                    placeholder: 'e.g., SCS Assembly',
                    value: newConsumable.name,
                    onChange: (e) => setNewConsumable({ ...newConsumable, name: e.target.value }),
                    className: 'w-full bg-slate-600 text-white rounded px-4 py-2'
                  })
                ),
                React.createElement('div', null,
                  React.createElement('label', { className: 'text-gray-300 block mb-1 text-sm font-bold' }, 'Category *'),
                  React.createElement('input', {
                    type: 'text',
                    placeholder: 'e.g., Spindle',
                    value: newConsumable.category,
                    onChange: (e) => setNewConsumable({ ...newConsumable, category: e.target.value }),
                    className: 'w-full bg-slate-600 text-white rounded px-4 py-2'
                  })
                ),
                React.createElement('div', null,
                  React.createElement('label', { className: 'text-gray-300 block mb-1 text-sm font-bold' }, 'Part Number'),
                  React.createElement('input', {
                    type: 'text',
                    placeholder: 'e.g., PN-001',
                    value: newConsumable.partNumber,
                    onChange: (e) => setNewConsumable({ ...newConsumable, partNumber: e.target.value }),
                    className: 'w-full bg-slate-600 text-white rounded px-4 py-2'
                  })
                ),

                // Dimensions
                React.createElement('div', null,
                  React.createElement('label', { className: 'text-gray-300 block mb-1 text-sm font-bold' }, 'Weight (kg)'),
                  React.createElement('input', {
                    type: 'text',
                    placeholder: 'e.g., 45',
                    value: newConsumable.weight,
                    onChange: (e) => setNewConsumable({ ...newConsumable, weight: e.target.value }),
                    className: 'w-full bg-slate-600 text-white rounded px-4 py-2'
                  })
                ),
                React.createElement('div', null,
                  React.createElement('label', { className: 'text-gray-300 block mb-1 text-sm font-bold' }, 'Length (mm)'),
                  React.createElement('input', {
                    type: 'text',
                    placeholder: 'e.g., 150',
                    value: newConsumable.length,
                    onChange: (e) => setNewConsumable({ ...newConsumable, length: e.target.value }),
                    className: 'w-full bg-slate-600 text-white rounded px-4 py-2'
                  })
                ),
                React.createElement('div', null,
                  React.createElement('label', { className: 'text-gray-300 block mb-1 text-sm font-bold' }, 'Outside Diameter (mm)'),
                  React.createElement('input', {
                    type: 'text',
                    placeholder: 'e.g., 65',
                    value: newConsumable.od,
                    onChange: (e) => setNewConsumable({ ...newConsumable, od: e.target.value }),
                    className: 'w-full bg-slate-600 text-white rounded px-4 py-2'
                  })
                ),

                // Pin
                React.createElement('div', null,
                  React.createElement('label', { className: 'text-gray-300 block mb-1 text-sm font-bold' }, 'Pin Size/Thread'),
                  React.createElement('input', {
                    type: 'text',
                    placeholder: 'e.g., 3.5 API Reg Pin',
                    value: newConsumable.pinSize,
                    onChange: (e) => setNewConsumable({ ...newConsumable, pinSize: e.target.value }),
                    className: 'w-full bg-slate-600 text-white rounded px-4 py-2'
                  })
                ),

                // Box
                React.createElement('div', null,
                  React.createElement('label', { className: 'text-gray-300 block mb-1 text-sm font-bold' }, 'Box Size/Thread'),
                  React.createElement('input', {
                    type: 'text',
                    placeholder: 'e.g., 3.5 API Reg Box',
                    value: newConsumable.boxSize,
                    onChange: (e) => setNewConsumable({ ...newConsumable, boxSize: e.target.value }),
                    className: 'w-full bg-slate-600 text-white rounded px-4 py-2'
                  })
                ),

                // Photo
                React.createElement('div', null,
                  React.createElement('label', { className: 'text-gray-300 block mb-1 text-sm font-bold' }, 'üì∏ Upload Photo'),
                  React.createElement('input', {
                    type: 'file',
                    accept: 'image/*',
                    onChange: (e) => handlePhotoUpload(e, true),
                    className: 'block w-full text-white text-sm'
                  })
                )
              ),

              // Photo Preview
              newConsumable.photo && React.createElement('div', { className: 'mb-6' },
                React.createElement('h4', { className: 'text-blue-300 font-bold mb-2' }, 'Photo Preview:'),
                React.createElement('img', {
                  src: newConsumable.photo,
                  className: 'w-32 h-32 object-cover rounded'
                })
              ),

              // Specs Preview
              React.createElement('div', { className: 'bg-slate-600/50 p-4 rounded mb-6' },
                React.createElement('h4', { className: 'text-blue-300 font-bold mb-3' }, 'üìã Specification Summary:'),
                React.createElement('div', { className: 'grid grid-cols-2 md:grid-cols-3 gap-3 text-sm text-gray-300' },
                  React.createElement('div', null, React.createElement('span', { className: 'text-gray-400' }, 'Weight: '), newConsumable.weight || '-'),
                  React.createElement('div', null, React.createElement('span', { className: 'text-gray-400' }, 'Length: '), newConsumable.length || '-'),
                  React.createElement('div', null, React.createElement('span', { className: 'text-gray-400' }, 'OD: '), newConsumable.od || '-'),
                  React.createElement('div', null, React.createElement('span', { className: 'text-gray-400' }, 'Pin: '), newConsumable.pinSize || '-'),
                  React.createElement('div', null, React.createElement('span', { className: 'text-gray-400' }, 'Box: '), newConsumable.boxSize || '-')
                )
              ),

              React.createElement('button', {
                onClick: addConsumable,
                className: 'w-full bg-green-600 hover:bg-green-500 text-white py-3 rounded font-bold text-lg'
              }, '‚úì Add Item')
            )
          )
        );
      }

      // ==================== ADMIN - ADD DRILL ====================
      if (adminMode && showAddDrill) {
        return React.createElement('div', { className: 'min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 text-white' },
          React.createElement('nav', { className: 'bg-slate-900 border-b border-blue-500/30 p-4' },
            React.createElement('div', { className: 'max-w-4xl mx-auto' },
              React.createElement('button', {
                onClick: () => setShowAddDrill(false),
                className: 'bg-gray-600 text-white px-4 py-2 rounded'
              }, 'Back')
            )
          ),
          React.createElement('div', { className: 'max-w-4xl mx-auto p-6' },
            React.createElement('div', { className: 'bg-gradient-to-br from-slate-700 to-slate-800 border border-blue-500/30 rounded-lg p-6' },
              React.createElement('h2', { className: 'text-2xl font-bold text-blue-400 mb-6' }, '‚ûï Add New Drill'),
              React.createElement('div', { className: 'grid grid-cols-1 md:grid-cols-2 gap-4' },
                React.createElement('input', {
                  type: 'text',
                  placeholder: 'Drill ID (e.g., DR301)',
                  value: newDrillId,
                  onChange: (e) => setNewDrillId(e.target.value),
                  className: 'bg-slate-600 text-white rounded px-4 py-2'
                }),
                React.createElement('select', {
                  value: newDrillType,
                  onChange: (e) => setNewDrillType(e.target.value),
                  className: 'bg-slate-600 text-white rounded px-4 py-2'
                },
                  React.createElement('option', null, 'Epiroc D65'),
                  React.createElement('option', null, 'CAT MD6250')
                ),
                React.createElement('input', {
                  type: 'text',
                  placeholder: 'Location',
                  value: newDrillLocation,
                  onChange: (e) => setNewDrillLocation(e.target.value),
                  className: 'bg-slate-600 text-white rounded px-4 py-2'
                }),
                React.createElement('div', null,
                  React.createElement('label', { className: 'text-gray-300 block mb-2' }, 'üì∏ Drill Photo'),
                  React.createElement('input', {
                    type: 'file',
                    accept: 'image/*',
                    onChange: (e) => handlePhotoUpload(e, false, true),
                    className: 'block w-full text-white'
                  })
                )
              ),
              newDrillPhoto && React.createElement('div', { className: 'mt-4' },
                React.createElement('img', {
                  src: newDrillPhoto,
                  className: 'w-32 h-32 object-cover rounded'
                })
              ),
              React.createElement('button', {
                onClick: addDrill,
                className: 'w-full mt-4 bg-green-600 hover:bg-green-500 text-white py-2 rounded font-bold'
              }, '‚úì Add Drill')
            )
          )
        );
      }

      // ==================== ADMIN PANEL ====================
      if (adminMode) {
        return React.createElement('div', { className: 'min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 text-white no-print' },
          React.createElement('nav', { className: 'bg-slate-900 border-b border-blue-500/30 p-4' },
            React.createElement('div', { className: 'max-w-7xl mx-auto flex justify-between items-center' },
              logoImage && React.createElement('img', {
                src: logoImage,
                className: 'logo-display'
              }),
              React.createElement('h1', { className: 'text-2xl font-bold text-blue-400' }, '‚öôÔ∏è Admin Panel'),
              React.createElement('button', {
                onClick: handleLogout,
                className: 'bg-red-600 hover:bg-red-500 text-white px-4 py-2 rounded font-bold'
              }, 'Logout')
            )
          ),
          React.createElement('div', { className: 'max-w-7xl mx-auto p-6' },
            React.createElement('div', { className: 'flex gap-2 mb-6 flex-wrap' },
              React.createElement('button', {
                onClick: () => setAdminTab('strings'),
                className: `px-4 py-2 rounded font-bold ${adminTab === 'strings' ? 'bg-blue-600' : 'bg-slate-600'}`
              }, '‚õìÔ∏è Strings'),
              React.createElement('button', {
                onClick: () => setAdminTab('consumables'),
                className: `px-4 py-2 rounded font-bold ${adminTab === 'consumables' ? 'bg-blue-600' : 'bg-slate-600'}`
              }, 'üß© Consumables'),
              React.createElement('button', {
                onClick: () => setAdminTab('drills'),
                className: `px-4 py-2 rounded font-bold ${adminTab === 'drills' ? 'bg-blue-600' : 'bg-slate-600'}`
              }, '‚õèÔ∏è Drills'),
              React.createElement('button', {
                onClick: () => setAdminTab('logo'),
                className: `px-4 py-2 rounded font-bold ${adminTab === 'logo' ? 'bg-blue-600' : 'bg-slate-600'}`
              }, 'üé® Logo')
            ),

            // LOGO TAB
            adminTab === 'logo' && React.createElement('div', { className: 'space-y-4' },
              React.createElement('div', { className: 'bg-gradient-to-br from-slate-700 to-slate-800 border border-blue-500/30 rounded-lg p-6' },
                React.createElement('h3', { className: 'text-xl font-bold text-blue-400 mb-4' }, 'üé® Company Logo'),
                React.createElement('p', { className: 'text-gray-300 mb-4' }, 'Upload your company logo (appears on all pages and printouts)'),
                
                logoImage && React.createElement('div', { className: 'mb-4 p-4 bg-slate-600/50 rounded text-center' },
                  React.createElement('h4', { className: 'text-blue-300 font-bold mb-3' }, 'Current Logo:'),
                  React.createElement('img', {
                    src: logoImage,
                    className: 'logo-display mx-auto mb-4'
                  }),
                  React.createElement('button', {
                    onClick: removeLogo,
                    className: 'bg-red-600 hover:bg-red-500 text-white px-4 py-2 rounded font-bold'
                  }, '‚úï Remove Logo')
                ),

                React.createElement('div', { className: 'border-2 border-dashed border-blue-500/50 rounded-lg p-6 text-center' },
                  React.createElement('input', {
                    type: 'file',
                    accept: 'image/*',
                    onChange: handleLogoUpload,
                    className: 'block w-full text-white mb-2'
                  }),
                  React.createElement('p', { className: 'text-gray-400 text-sm' }, 'PNG, JPG recommended (square or landscape format works best)')
                )
              )
            ),

            // STRINGS TAB
            adminTab === 'strings' && React.createElement('div', { className: 'space-y-4' },
              React.createElement('button', {
                onClick: () => setShowCreateString(true),
                className: 'w-full bg-green-600 hover:bg-green-500 text-white py-3 rounded-lg font-bold'
              }, '‚ûï Create New String'),
              React.createElement('div', { className: 'bg-gradient-to-br from-slate-700 to-slate-800 border border-blue-500/30 rounded-lg p-6' },
                React.createElement('h3', { className: 'text-xl font-bold text-blue-400 mb-4' }, 'üìã Authorised Strings'),
                Object.values(authorisedStrings).length === 0 ?
                  React.createElement('p', { className: 'text-gray-400' }, 'No strings created')
                  :
                  React.createElement('div', { className: 'space-y-3' },
                    Object.values(authorisedStrings).map((str) =>
                      React.createElement('div', { key: str.id, className: 'bg-slate-600/50 p-4 rounded border border-slate-500' },
                        React.createElement('div', { className: 'font-bold text-blue-300 mb-1' }, str.name),
                        React.createElement('div', { className: 'text-xs text-gray-400' },
                          `Type: ${str.drillType} | ${str.components.length} components`
                        ),
                        React.createElement('button', {
                          onClick: () => {
                            const newStrings = { ...authorisedStrings };
                            delete newStrings[str.id];
                            setAuthorisedStrings(newStrings);
                          },
                          className: 'text-red-400 text-sm mt-2'
                        }, '‚úï Delete')
                      )
                    )
                  )
              )
            ),

            // CONSUMABLES TAB
            adminTab === 'consumables' && React.createElement('div', { className: 'space-y-4' },
              React.createElement('button', {
                onClick: () => setShowAddConsumable(true),
                className: 'w-full bg-green-600 hover:bg-green-500 text-white py-3 rounded-lg font-bold'
              }, '‚ûï Add Consumable'),
              React.createElement('div', { className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4' },
                consumables.map(cons =>
                  React.createElement('div', { key: cons.id, className: 'bg-gradient-to-br from-slate-700 to-slate-800 border border-blue-500/30 rounded-lg p-4' },
                    cons.photo && React.createElement('img', {
                      src: cons.photo,
                      className: 'w-full h-32 object-cover rounded mb-2'
                    }),
                    React.createElement('div', { className: 'font-bold text-blue-300' }, cons.name),
                    React.createElement('div', { className: 'text-xs text-gray-400 mb-2' }, `${cons.category} | ${cons.partNumber}`),
                    React.createElement('div', { className: 'text-xs text-gray-500 space-y-1 mb-2' },
                      cons.weight && React.createElement('div', null, `Weight: ${cons.weight}kg`),
                      cons.od && React.createElement('div', null, `OD: ${cons.od}mm`),
                      cons.pinSize && React.createElement('div', null, `Pin: ${cons.pinSize}`)
                    ),
                    React.createElement('button', {
                      onClick: () => removeConsumable(cons.id),
                      className: 'text-red-400 text-sm'
                    }, '‚úï Remove')
                  )
                )
              )
            ),

            // DRILLS TAB
            adminTab === 'drills' && React.createElement('div', { className: 'space-y-4' },
              React.createElement('button', {
                onClick: () => setShowAddDrill(true),
                className: 'w-full bg-green-600 hover:bg-green-500 text-white py-3 rounded-lg font-bold'
              }, '‚ûï Add Drill'),
              React.createElement('div', { className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4' },
                Object.entries(drills).map(([rigId, drill]) =>
                  React.createElement('div', { key: rigId, className: 'bg-gradient-to-br from-slate-700 to-slate-800 border border-blue-500/30 rounded-lg p-4' },
                    drill.photo && React.createElement('img', {
                      src: drill.photo,
                      className: 'w-full h-32 object-cover rounded mb-2'
                    }),
                    React.createElement('div', { className: 'font-bold text-blue-300 text-lg' }, rigId),
                    React.createElement('div', { className: 'text-xs text-gray-400 space-y-1' },
                      React.createElement('div', null, `Type: ${drill.type}`),
                      React.createElement('div', null, `Location: ${drill.location}`)
                    ),
                    React.createElement('div', { className: 'mt-2' },
                      React.createElement('label', { className: 'text-gray-300 block mb-1 text-xs' }, 'Update photo:'),
                      React.createElement('input', {
                        type: 'file',
                        accept: 'image/*',
                        onChange: (e) => handleDrillPhotoUpload(rigId, e),
                        className: 'block w-full text-white text-xs'
                      })
                    ),
                    React.createElement('button', {
                      onClick: () => removeDrill(rigId),
                      className: 'text-red-400 text-sm mt-2'
                    }, '‚úï Remove Drill')
                  )
                )
              )
            )
          )
        );
      }

      // ==================== FLEET DASHBOARD ====================
      if (currentPage === 'fleet') {
        return React.createElement('div', { className: 'min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 text-white no-print' },
          React.createElement('nav', { className: 'bg-slate-900 border-b border-blue-500/30 p-4 sticky top-0' },
            React.createElement('div', { className: 'max-w-7xl mx-auto flex justify-between items-center' },
              React.createElement('div', { className: 'flex items-center gap-4' },
                logoImage && React.createElement('img', {
                  src: logoImage,
                  className: 'logo-display'
                }),
                React.createElement('h1', { className: 'text-2xl font-bold text-blue-400' }, '‚õèÔ∏è Drill Rig Management')
              ),
              React.createElement('button', {
                onClick: () => setShowLoginPrompt(true),
                className: 'bg-red-600 hover:bg-red-500 text-white px-4 py-2 rounded font-bold'
              }, 'üîì Admin')
            )
          ),
          React.createElement('div', { className: 'max-w-7xl mx-auto p-6' },
            React.createElement('h2', { className: 'text-3xl font-bold text-blue-400 mb-6' }, 'üìä Fleet Dashboard - Pilgangoora'),
            React.createElement('div', { className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4' },
              Object.entries(drills).map(([rigId, drill]) =>
                React.createElement('div', {
                  key: rigId,
                  onClick: () => { setSelectedRig(rigId); setCurrentPage('detail'); },
                  className: 'bg-gradient-to-br from-slate-700 to-slate-800 border border-blue-500/30 rounded-lg p-4 cursor-pointer hover:border-blue-400 hover:shadow-lg transition'
                },
                  drill.photo && React.createElement('img', {
                    src: drill.photo,
                    className: 'w-full h-40 object-cover rounded mb-2'
                  }),
                  React.createElement('div', { className: 'font-bold text-blue-400 text-lg' }, rigId),
                  React.createElement('div', { className: 'space-y-1 text-sm text-gray-300' },
                    React.createElement('div', null, `Type: ${drill.type}`),
                    React.createElement('div', null, `Location: ${drill.location}`),
                    React.createElement('div', { className: drill.status === 'Active' ? 'text-green-400' : 'text-yellow-400' }, `Status: ${drill.status}`),
                    React.createElement('div', { className: 'text-blue-300 font-bold' }, `Hours: ${drill.hours.toLocaleString()}`)
                  ),
                  rigStringAssignments[rigId] && React.createElement('div', { className: 'mt-2 pt-2 border-t border-gray-600 text-xs text-green-400 font-bold' },
                    '‚úì String assigned'
                  ),
                  React.createElement('div', { className: 'mt-3 text-xs text-gray-400' }, '‚Üí Click to manage')
                )
              )
            )
          )
        );
      }

      // ==================== RIG DETAIL & STRING MANAGEMENT ====================
      if (currentPage === 'detail') {
        const drill = drills[selectedRig];
        const assignedStringId = rigStringAssignments[selectedRig];
        const assignedString = assignedStringId ? authorisedStrings[assignedStringId] : null;
        const availableStrings = Object.values(authorisedStrings).filter(s => s.drillType === drill.type);

        return React.createElement('div', { className: 'min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 text-white' },
          React.createElement('nav', { className: 'bg-slate-900 border-b border-blue-500/30 p-4 sticky top-0 no-print' },
            React.createElement('div', { className: 'max-w-7xl mx-auto flex justify-between items-center' },
              React.createElement('div', { className: 'flex items-center gap-4' },
                logoImage && React.createElement('img', {
                  src: logoImage,
                  className: 'logo-display'
                }),
                React.createElement('h1', { className: 'text-2xl font-bold text-blue-400' }, '‚õèÔ∏è Drill Rig Management')
              ),
              React.createElement('button', {
                onClick: () => setShowLoginPrompt(true),
                className: 'bg-red-600 hover:bg-red-500 text-white px-4 py-2 rounded font-bold'
              }, 'üîì Admin')
            )
          ),

          // Print Layout
          assignedString && React.createElement('div', { className: 'print-only w-full' },
            React.createElement('div', { className: 'p-8 bg-white text-black' },
              React.createElement('div', { className: 'flex justify-between items-start mb-6' },
                logoImage && React.createElement('img', {
                  src: logoImage,
                  className: 'logo-print'
                }),
                React.createElement('div', { className: 'text-right' },
                  React.createElement('h1', { className: 'text-3xl font-bold mb-2' }, selectedRig),
                  React.createElement('h2', { className: 'text-xl text-gray-700 mb-1' }, 'Authorised Drill String'),
                  React.createElement('p', { className: 'text-gray-600 font-bold' }, assignedString.name)
                )
              ),

              React.createElement('div', { className: 'border-4 border-black mb-6 p-4' },
                React.createElement('p', { className: 'text-sm' }, `Drill Type: ${assignedString.drillType} | Date: ${new Date().toLocaleDateString()}`)
              ),

              React.createElement('div', { className: 'grid grid-cols-3 gap-8' },
                // Left: Components Visual
                React.createElement('div', { className: 'col-span-1 border-r-4 border-black pr-8' },
                  React.createElement('h3', { className: 'text-lg font-bold mb-4 text-center border-b-2 border-black pb-2' }, 'Drill String Assembly'),
                  React.createElement('div', { className: 'flex flex-col items-center gap-1' },
                    assignedString.components.map((comp, idx) =>
                      React.createElement('div', {
                        key: idx,
                        className: 'w-32 border-3 border-black bg-gray-200 text-center py-3 text-xs font-bold h-16 flex items-center justify-center'
                      },
                        comp.name
                      )
                    )
                  )
                ),

                // Center & Right: Component Details
                React.createElement('div', { className: 'col-span-2' },
                  React.createElement('h3', { className: 'text-lg font-bold mb-3 border-b-2 border-black pb-2' }, 'Component Details'),
                  React.createElement('table', { className: 'w-full border-collapse text-sm' },
                    React.createElement('thead', null,
                      React.createElement('tr', { className: 'bg-gray-300' },
                        React.createElement('th', { className: 'border-2 border-black p-1 text-left' }, 'Component'),
                        React.createElement('th', { className: 'border-2 border-black p-1 text-left' }, 'PN'),
                        React.createElement('th', { className: 'border-2 border-black p-1 text-left' }, 'Wt(kg)'),
                        React.createElement('th', { className: 'border-2 border-black p-1 text-left' }, 'Length'),
                        React.createElement('th', { className: 'border-2 border-black p-1 text-left' }, 'OD'),
                        React.createElement('th', { className: 'border-2 border-black p-1 text-left' }, 'Pin/Box')
                      )
                    ),
                    React.createElement('tbody', null,
                      assignedString.components.map((comp, idx) =>
                        React.createElement('tr', { key: idx, className: idx % 2 === 0 ? 'bg-white' : 'bg-gray-100' },
                          React.createElement('td', { className: 'border-2 border-black p-1 font-bold text-xs' }, comp.name.substring(0, 20)),
                          React.createElement('td', { className: 'border-2 border-black p-1 text-xs' }, comp.partNumber || '-'),
                          React.createElement('td', { className: 'border-2 border-black p-1 text-xs text-center' }, comp.weight || '-'),
                          React.createElement('td', { className: 'border-2 border-black p-1 text-xs text-center' }, comp.length ? `${comp.length}mm` : '-'),
                          React.createElement('td', { className: 'border-2 border-black p-1 text-xs text-center' }, comp.od ? `${comp.od}mm` : '-'),
                          React.createElement('td', { className: 'border-2 border-black p-1 text-xs' }, `${comp.pinSize ? comp.pinSize.substring(0, 10) : ''} / ${comp.boxSize ? comp.boxSize.substring(0, 10) : ''}`)
                        )
                      )
                    )
                  )
                )
              ),

              React.createElement('div', { className: 'mt-8 border-t-4 border-black pt-4 text-center text-sm' },
                React.createElement('p', null, '‚úì Post this at the drill laydown - No Confusion!'),
                React.createElement('p', { className: 'text-gray-600' }, `Printed: ${new Date().toLocaleString()}`)
              )
            )
          ),

          // Edit Mode
          React.createElement('div', { className: 'max-w-7xl mx-auto p-6 no-print' },
            React.createElement('button', {
              onClick: () => setCurrentPage('fleet'),
              className: 'bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded font-bold mb-6'
            }, '‚Üê Back to Fleet'),

            React.createElement('div', { className: 'grid grid-cols-1 lg:grid-cols-3 gap-6' },
              // Drill Info
              React.createElement('div', { className: 'space-y-4' },
                React.createElement('div', { className: 'bg-gradient-to-br from-slate-700 to-slate-800 border border-blue-500/30 rounded-lg p-6' },
                  drill.photo && React.createElement('img', {
                    src: drill.photo,
                    className: 'w-full h-40 object-cover rounded mb-4'
                  }),
                  React.createElement('h2', { className: 'text-3xl font-bold text-blue-400 mb-4' }, selectedRig),
                  React.createElement('div', { className: 'space-y-3 text-gray-300' },
                    React.createElement('div', null,
                      React.createElement('span', { className: 'text-gray-400 font-bold' }, 'Type: '),
                      drill.type
                    ),
                    React.createElement('div', null,
                      React.createElement('span', { className: 'text-gray-400 font-bold' }, 'Location: '),
                      drill.location
                    ),
                    React.createElement('div', { className: 'text-lg font-bold', style: { color: drill.status === 'Active' ? '#4ade80' : '#eab308' } },
                      `Status: ${drill.status}`
                    ),
                    React.createElement('div', { className: 'text-lg text-green-400 font-bold' },
                      `Hours: ${drill.hours.toLocaleString()}`
                    )
                  )
                )
              ),

              // String Management
              React.createElement('div', { className: 'lg:col-span-2' },
                React.createElement('div', { className: 'bg-gradient-to-br from-slate-700 to-slate-800 border border-blue-500/30 rounded-lg p-6' },
                  React.createElement('h3', { className: 'text-2xl font-bold text-blue-400 mb-6' }, '‚õìÔ∏è Authorised Drill String'),

                  assignedString ?
                    React.createElement('div', null,
                      React.createElement('div', { className: 'mb-4 p-4 bg-green-900/20 border border-green-500/30 rounded' },
                        React.createElement('div', { className: 'text-green-400 font-bold mb-3' }, `‚úì Current: ${assignedString.name}`),
                        React.createElement('div', { className: 'flex gap-2' },
                          React.createElement('button', {
                            onClick: () => window.print(),
                            className: 'bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded'
                          }, 'üñ®Ô∏è Print String'),
                          React.createElement('button', {
                            onClick: () => {
                              const newAssignments = { ...rigStringAssignments };
                              delete newAssignments[selectedRig];
                              setRigStringAssignments(newAssignments);
                            },
                            className: 'bg-red-600 hover:bg-red-500 text-white px-4 py-2 rounded'
                          }, 'Remove String')
                        )
                      ),
                      React.createElement('div', { className: 'bg-slate-600/30 rounded p-8 mb-4' },
                        React.createElement('div', { className: 'flex flex-col items-center gap-1 min-h-96' },
                          assignedString.components.map((comp, idx) =>
                            React.createElement('div', {
                              key: idx,
                              className: 'component-tile w-28 rounded text-xs text-center py-4 bg-gradient-to-b from-blue-600 to-blue-700 text-white font-bold shadow-lg flex flex-col items-center justify-center'
                            },
                              comp.photo && React.createElement('img', {
                                src: comp.photo,
                                className: 'w-20 h-20 object-cover rounded mb-1'
                              }),
                              React.createElement('span', null, comp.name.split(' ')[0])
                            )
                          )
                        )
                      )
                    )
                    :
                    React.createElement('div', null,
                      React.createElement('p', { className: 'text-gray-400 mb-4' }, 'No drill string assigned. Select one:'),
                      React.createElement('div', { className: 'space-y-2' },
                        availableStrings.length === 0 ?
                          React.createElement('p', { className: 'text-gray-500 text-sm' }, 'No strings available for this drill type. Create one in admin.')
                          :
                          availableStrings.map((str) =>
                            React.createElement('button', {
                              key: str.id,
                              onClick: () => assignStringToRig(str.id),
                              className: 'w-full text-left bg-slate-600 hover:bg-blue-600 p-3 rounded transition'
                            },
                              React.createElement('div', { className: 'font-bold text-blue-300' }, str.name),
                              React.createElement('div', { className: 'text-xs text-gray-400' }, `${str.components.length} components`)
                            )
                          )
                      )
                    )
                )
              )
            )
          )
        );
      }

      return React.createElement('div', { className: 'min-h-screen bg-slate-900 flex items-center justify-center' },
        React.createElement('p', { className: 'text-white' }, 'Loading...')
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(React.createElement(App));
  </script>
</body>
</html>
